(this["webpackJsonpreact-products"]=this["webpackJsonpreact-products"]||[]).push([[0],{25:function(e,t,n){},33:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c={};n.r(c),n.d(c,"get",(function(){return f})),n.d(c,"remove",(function(){return O})),n.d(c,"select",(function(){return m})),n.d(c,"addMode",(function(){return C})),n.d(c,"cancel",(function(){return x})),n.d(c,"cancelCreate",(function(){return P})),n.d(c,"create",(function(){return g})),n.d(c,"update",(function(){return v})),n.d(c,"change",(function(){return N})),n.d(c,"changeCreate",(function(){return _}));var r={};n.r(r),n.d(r,"get",(function(){return y})),n.d(r,"remove",(function(){return T}));var i=n(0),o=n(1),a=n.n(o),u=n(17),s=n.n(u),d=(n(33),n(5)),l=n(4);n(25);var j=function(){return Object(i.jsx)("nav",{className:"header",children:Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsxs)("div",{className:"headerbox",children:[Object(i.jsxs)("ul",{className:"menubar",children:[Object(i.jsx)("li",{className:"menubar__item",children:Object(i.jsx)(d.c,{exact:!0,to:"/",activeClassName:"active",children:"Main"})}),Object(i.jsx)("li",{className:"menubar__item",children:Object(i.jsx)(d.c,{to:"/cart",children:"Cart"})}),Object(i.jsx)("li",{className:"menubar__item",children:Object(i.jsx)(d.c,{to:"/edit",children:"Edit"})}),Object(i.jsx)("li",{className:"menubar__item",children:Object(i.jsx)(d.c,{to:"/create",children:"Create"})})]}),Object(i.jsxs)("div",{className:"user",children:[Object(i.jsx)("span",{className:"user__icon"}),Object(i.jsx)("span",{className:"user__enter",children:"\u0412\u0445\u043e\u0434"})]})]}),Object(i.jsx)("div",{className:"burger",children:Object(i.jsx)("span",{className:"burger__lines"})})]})})},p=n(11),b=n(12),h=n(10),f=function(e){return{type:"PRODUCT_GET",items:e}},O=function(e){return{type:"PRODUCT_REMOVE",i:e}},m=function(e){return{type:"PRODUCT_SELECT",i:e}},C=function(){return{type:"PRODUCT_ADD_MODE"}},x=function(){return{type:"PRODUCT_CANCEL"}},P=function(){return{type:"PRODUCT_CANCEL_CREATE"}},g=function(e){return{type:"PRODUCT_CREATE",i:e}},v=function(){return{type:"PRODUCT_UPDATE"}},N=function(e){return{type:"PRODUCT_CHANGE",e:e}},_=function(e){return{type:"PRODUCT_CHANGE_CREATE",e:e}},y=function(e){return{type:"PRODUCT_CART_GET",items:e}},T=function(e){return{type:"PRODUCT_CART_REMOVE",i:e}},E={main:c,cart:r},D=function(e){return Object(i.jsx)("div",{className:"products__item",children:Object(i.jsxs)("div",{className:e.productP.id===e.selectedProduct.id?"product-selected":"",children:[Object(i.jsxs)("div",{className:"product-element",children:[Object(i.jsx)("p",{className:"product-element__badge",children:e.productP.id}),Object(i.jsx)("p",{className:"product-element__title",children:e.productP.title}),Object(i.jsx)("p",{className:"product-element__price",children:e.productP.price}),Object(i.jsx)("p",{className:"product-element__description",children:e.productP.description})]}),Object(i.jsxs)("div",{className:"product-buttons",children:[Object(i.jsx)("button",{type:"button",className:"product-buttons__edit",onClick:function(){return e.onEdit(e.productP)},children:"Edit"}),Object(i.jsx)("button",{type:"button",className:"product-buttons__delete",onClick:function(t){return e.onDelete(t,e.productP)},children:"Delete"}),Object(i.jsx)("button",{type:"button",className:"product-buttons__to-cart",onClick:function(t){return e.onAddToCart(t,e.productP)},disabled:e.productP.inCart,children:"Add to cart"})]})]})})},w=function(e){for(var t=e.productsPerPage,n=e.totalProducts,c=e.paginate,r=[],o=1;o<=Math.ceil(n/t);o++)r.push(o);return Object(i.jsx)("nav",{className:"",children:Object(i.jsx)("ul",{className:"pagination",children:r.map((function(e){return Object(i.jsx)("li",{className:"pagination__item",children:Object(i.jsx)(d.b,{onClick:function(){return c(e)},to:"",className:"pagination-link",children:e})},e)}))})})},R="https://dbprod-f9cb.restdb.io/rest",U={get:function(){return new Promise((function(e,t){fetch("".concat(R,"/products"),{method:"GET",headers:{"cache-control":"no-cache","x-apikey":"6158c6b18597142da1745317"}}).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){t(e)}))}))},create:function(e){return new Promise((function(t,n){fetch("".concat(R,"/products"),{method:"POST",body:JSON.stringify(e),headers:{"cache-control":"no-cache","x-apikey":"6158c6b18597142da1745317","content-type":"application/json"},json:!0}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){n(e)}))}))},update:function(e){return new Promise((function(t,n){fetch("".concat(R,"/products/").concat(e.id),{method:"PUT",body:JSON.stringify(e),headers:{"cache-control":"no-cache","x-apikey":"6158c6b18597142da1745317","content-type":"application/json"},json:!0}).then((function(e){t(e)})).catch((function(e){n(e)}))}))},destroy:function(e){return new Promise((function(t,n){fetch("".concat(R,"/products/").concat(e.id),{method:"DELETE",headers:{"cache-control":"no-cache","x-apikey":"6158c6b18597142da1745317","content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){n(e)}))}))},getCart:function(){return new Promise((function(e,t){fetch("".concat(R,"/cart"),{method:"GET",headers:{"cache-control":"no-cache","x-apikey":"6158c6b18597142da1745317"}}).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){t(e)}))}))},createCart:function(e){return new Promise((function(t,n){fetch("".concat(R,"/cart"),{method:"POST",body:JSON.stringify(e),headers:{"cache-control":"no-cache","x-apikey":"6158c6b18597142da1745317","content-type":"application/json"},json:!0}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){n(e)}))}))},updateCart:function(e){return new Promise((function(t,n){fetch("".concat(R,"/cart/").concat(e._id),{method:"PUT",body:JSON.stringify(e),headers:{"cache-control":"no-cache","x-apikey":"6158c6b18597142da1745317","content-type":"application/json"},json:!0}).then((function(e){t(e)})).catch((function(e){n(e)}))}))},destroyCart:function(e){return new Promise((function(t,n){fetch("".concat(R,"/cart/").concat(e._id),{method:"DELETE",headers:{"cache-control":"no-cache","x-apikey":"6158c6b18597142da1745317","content-type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){n(e)}))}))}},A=Object(h.b)((function(e){return{products:e.main.products,selectedProduct:e.main.selectedProduct,addingProduct:e.main.addingProduct}}),(function(e){return{onGet:function(t){return e(E.main.get(t))},onDel:function(t){return e(E.main.remove(t))},onDelCart:function(t){return e(E.cart.remove(t))},onSelect:function(t){return e(E.main.select(t))},addMode:function(){return e(E.main.addMode())}}}))((function(e){var t=e.onGet,n=Object(o.useState)(!1),c=Object(b.a)(n,2),r=c[0],a=c[1],u=Object(o.useState)(!1),s=Object(b.a)(u,2),d=s[0],l=s[1];Object(o.useEffect)((function(){U.get().then((function(e){t(e),l(!0),a(!1)}))}),[t,e.selectedProduct.price,r]);var j,h=function(t){e.onSelect(t),e.history.push("/edit")},f=function(t,n){t.stopPropagation(),U.destroy(n).then((function(){e.onDel(n)})).catch((function(e){console.log(e)})),U.destroyCart(n).then((function(){e.onDelCart(n)})).catch((function(e){console.log(e)}))},O=function(e,t){e.stopPropagation(),t.inCart=!0,a(t.inCart);var n=t._id,c=t.id,r=t.title,i=t.price,o={id:c,title:r,description:t.description,price:i,quantity:1};o.id=n,U.update(t).then((function(){console.log("Good inCart")})).catch((function(e){console.log(e)})),U.createCart(o).then((function(){console.log("Good productToCart")})).catch((function(e){console.log(e)}))},m=Object(o.useState)(!0),C=Object(b.a)(m,2),x=C[0],P=C[1],g=Object(o.useState)(""),v=Object(b.a)(g,2),N=v[0],_=v[1],y=Object(o.useState)(1),T=Object(b.a)(y,2),E=T[0],R=T[1],A=Object(o.useState)(10),k=Object(b.a)(A,1)[0],S=[];if(e.products.length>0){(S=Object(p.a)(e.products).filter((function(e){var t;return(""===N||e.title.includes(N)||e.title.toLowerCase().includes(N))&&(t=e),t}))).forEach((function(e){return e.id=e._id}));var M=E*k,G=M-k;j=(S=S.sort((function(e,t){return(x?1:-1)*e.title.localeCompare(t.title)}))).slice(G,M).map((function(t){return Object(i.jsx)(D,{productP:t,selectedProduct:e.selectedProduct,onEdit:h,onDelete:f,onAddToCart:O},t.id)}))}return Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsxs)("h1",{children:["Main View ",e.products.length]}),Object(i.jsxs)("div",{className:"mb-1",children:[Object(i.jsx)("button",{className:"mr-1",type:"button",onClick:function(){return e.addMode(),void e.history.push("/create")},children:"Create"}),Object(i.jsx)("button",{type:"button",onClick:function(){return P(!x)},children:"Sort"})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Title"}),Object(i.jsx)("input",{type:"text",name:"filter",onChange:function(e){return function(e){e.preventDefault();var t=e.target.value;_(t.trim())}(e)},placeholder:"Filter",className:"filter"})]}),Object(i.jsxs)("div",{className:"products",children:[d?j:"Loading...",d&&0===S.length?"Empty":""]}),d&&Object(i.jsx)(w,{productsPerPage:k,totalProducts:S.length,paginate:function(e){return R(e)}})]})})),k=Object(h.b)((function(e){return{selectedProduct:e.main.selectedProduct}}),(function(e){return{onCancel:function(){return e(E.main.cancel())},onUpdate:function(){return e(E.main.update())},onChange:function(t){return e(E.main.change(t))}}}))((function(e){return e.selectedProduct.id?Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsx)("h1",{children:"Edit View"}),Object(i.jsxs)("form",{className:"editfields",children:[Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"id:"}),Object(i.jsx)("span",{children:e.selectedProduct.id})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Title:"}),Object(i.jsx)("input",{type:"text",name:"title",value:e.selectedProduct.title,placeholder:"title",onChange:function(t){return e.onChange(t)}})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Price:"}),Object(i.jsx)("input",{type:"number",min:"0",name:"price",placeholder:"price",value:e.selectedProduct.price,onChange:function(t){return e.onChange(t)}})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Description:"}),Object(i.jsx)("input",{type:"text",name:"description",value:e.selectedProduct.description,placeholder:"description",onChange:function(t){return e.onChange(t)}})]}),Object(i.jsx)("button",{className:"mr-1",type:"button",onClick:e.onCancel,children:"Cancel"}),Object(i.jsx)("button",{type:"button",onClick:function(){var t=e.selectedProduct,n=t.id,c=t.title,r=t.price,i={id:n,title:c,description:t.description,price:r};U.update(t).then((function(){e.onUpdate()})).catch((function(e){console.log(e)})),t.inCart&&U.updateCart(i).then((function(){console.log("update productCart")})).catch((function(e){console.log(e)})),e.history.push("/")},children:"Save"})]})]}):Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsx)("h1",{children:"Edit View"}),Object(i.jsx)("div",{className:"row",children:Object(i.jsx)(d.b,{to:"/",children:"To Main View"})})]})})),S=Object(h.b)((function(e){return{products:e.main.products,addingProduct:e.main.addingProduct,newProduct:e.main.newProduct}}),(function(e){return{onCancelCreate:function(){return e(E.main.cancelCreate())},onCreate:function(t){return e(E.main.create(t))},onChangeCreate:function(t){return e(E.main.changeCreate(t))},addMode:function(){return e(E.main.addMode())}}}))((function(e){return e.addingProduct?Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsx)("h1",{children:"Create View"}),Object(i.jsxs)("form",{className:"editfields",children:[Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"id:"}),Object(i.jsx)("span",{children:"ID"})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Title:"}),Object(i.jsx)("input",{type:"text",name:"title",value:e.newProduct.title,placeholder:"title",onChange:function(t){return e.onChangeCreate(t)}})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Price:"}),Object(i.jsx)("input",{type:"number",min:"0",name:"price",placeholder:"price",value:e.newProduct.price,onChange:function(t){return e.onChangeCreate(t)}})]}),Object(i.jsxs)("div",{className:"form-group",children:[Object(i.jsx)("label",{children:"Description:"}),Object(i.jsx)("input",{type:"text",name:"description",value:e.newProduct.description,placeholder:"description",onChange:function(t){return e.onChangeCreate(t)}})]}),Object(i.jsx)("button",{type:"button",className:"mr-1",onClick:e.onCancelCreate,children:"Cancel"}),Object(i.jsx)("button",{type:"button",onClick:function(){U.create(e.newProduct).then((function(t){console.log("Successfully created!"),e.onCreate(t)})).catch((function(e){console.log(e)})),e.history.push("/")},children:"Save"})]})]}):Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsx)("h1",{children:"Create View"}),Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("button",{className:"wrapper",type:"button",onClick:e.addMode,children:"Create"})})]})})),M=function(e){return Object(i.jsx)("div",{className:"products__item",children:Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"product-element",children:[Object(i.jsx)("p",{className:"product-element__badge",children:e.product.id}),Object(i.jsx)("p",{className:"product-element__title",children:e.product.title}),Object(i.jsx)("p",{className:"product-element__price",children:e.product.price}),Object(i.jsx)("p",{className:"product-element__description",children:e.product.quantity}),Object(i.jsx)("p",{className:"product-element__description",children:e.product.description})]}),Object(i.jsxs)("div",{className:"product-buttons",children:[Object(i.jsx)("button",{className:"mr-1",onClick:function(){return e.onMinus(e.product)},children:"-1"}),Object(i.jsx)("button",{onClick:function(){return e.onPlus(e.product)},children:"+1"}),Object(i.jsx)("button",{className:"product-buttons__delete",onClick:function(t){return e.onDelete(t,e.product)},children:"Delete"})]})]})})},G=Object(h.b)((function(e){return{productsCart:e.cart.productsCart}}),(function(e){return{onGet:function(t){return e(E.cart.get(t))},onDel:function(t){return e(E.cart.remove(t))}}}))((function(e){var t=Object(o.useState)(null),n=Object(b.a)(t,2),c=n[0],r=n[1],a=e.onGet;Object(o.useEffect)((function(){U.getCart().then((function(e){a(e),r(e.reduce((function(e,t){return e+t.price*t.quantity}),0))}))}),[a]);var u=function(t){t.quantity++,U.updateCart(t).then((function(){r(e.productsCart.reduce((function(e,t){return e+t.price*t.quantity}),0))})).catch((function(e){console.log(e)}))},s=function(t){t.quantity>1&&(t.quantity--,U.updateCart(t).then((function(){r(e.productsCart.reduce((function(e,t){return e+t.price*t.quantity}),0))})).catch((function(e){console.log(e)})))},l=function(t,n){t.stopPropagation();var c=n.id,r=n.title,i=n.price,o={id:c,title:r,description:n.description,price:i,inCart:!1};U.update(o).then((function(){console.log("Good inCart - false")})).catch((function(e){console.log(e)})),U.destroyCart(n).then((function(){e.onDel(n)}))},j=Object(p.a)(e.productsCart).map((function(e){return Object(i.jsx)(M,{product:e,onDelete:l,onPlus:u,onMinus:s},e.id)}));return 0!==e.productsCart.length?Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsx)("h1",{children:"Cart View"}),Object(i.jsx)("div",{className:"products",children:j}),Object(i.jsxs)("div",{className:"row",children:["Total: ",c]})]}):Object(i.jsx)("div",{className:"wrapper",children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("p",{className:"mb-1",children:"Cart is empty"}),Object(i.jsx)(d.b,{to:"/",children:"To Main View"})]})})}));var L=function(){return Object(i.jsxs)("div",{className:"wrapper",children:[Object(i.jsx)("h1",{children:"Not Found page"}),Object(i.jsx)(d.b,{to:"/",className:"",children:"Main"})]})},V=function(){return Object(i.jsx)(d.a,{children:Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(j,{}),Object(i.jsxs)(l.c,{children:[Object(i.jsx)(l.a,{path:"/",component:A,exact:!0}),Object(i.jsx)(l.a,{path:"/cart",component:G}),Object(i.jsx)(l.a,{path:"/edit",component:k}),Object(i.jsx)(l.a,{path:"/create",component:S}),Object(i.jsx)(l.a,{path:"*",component:L})]})]})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),i(e),o(e)}))},F=n(14),J=n(3),H={products:[],addingProduct:!1,newProduct:null,selectedProduct:{id:"",title:"",description:"",price:"",inCart:""}};function I(e,t){var n=t;return Object(J.a)(Object(J.a)({},e),{},{products:n})}function B(e,t){var n=Object(p.a)(e.products).filter((function(e){return e.id!==t.id})),c=e.selectedProduct,r=c.id===t.id?{id:"",title:"",description:"",price:"",inCart:""}:c;return Object(J.a)(Object(J.a)({},e),{},{products:n,selectedProduct:r})}function z(e,t){var n=t;return Object(J.a)(Object(J.a)({},e),{},{selectedProduct:n})}function K(e){return Object(J.a)(Object(J.a)({},e),{},{addingProduct:!0,newProduct:{id:"",title:"",description:"",price:"",inCart:!1}})}function Q(e){return Object(J.a)(Object(J.a)({},e),{},{selectedProduct:{id:"",title:"",description:"",price:"",inCart:""}})}function W(e){return Object(J.a)(Object(J.a)({},e),{},{addingProduct:!1,newProduct:null})}function X(e,t){var n=Object(p.a)(e.products).push(t);return Object(J.a)(Object(J.a)({},e),{},{products:n,addingProduct:!1,newProduct:null})}function Y(e){return Object(J.a)(Object(J.a)({},e),{},{selectedProduct:{id:"",title:"",description:"",price:"",inCart:""}})}function Z(e,t){var n=Object(J.a)({},e.selectedProduct);return n[t.target.name]=t.target.value,n.price=Number(n.price),Object(J.a)(Object(J.a)({},e),{},{selectedProduct:n})}function $(e,t){var n=Object(J.a)({},e.newProduct);return n[t.target.name]=t.target.value,n.price=Number(n.price),Object(J.a)(Object(J.a)({},e),{},{newProduct:n})}var ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_GET":return I(e,t.items);case"PRODUCT_REMOVE":return B(e,t.i);case"PRODUCT_SELECT":return z(e,t.i);case"PRODUCT_ADD_MODE":return K(e);case"PRODUCT_CANCEL":return Q(e);case"PRODUCT_CANCEL_CREATE":return W(e);case"PRODUCT_CREATE":return X(e,t.items);case"PRODUCT_UPDATE":return Y(e);case"PRODUCT_CHANGE":return Z(e,t.e);case"PRODUCT_CHANGE_CREATE":return $(e,t.e);default:return e}},te={productsCart:[]};function ne(e,t){var n=t;return Object(J.a)(Object(J.a)({},e),{},{productsCart:n})}function ce(e,t){var n=Object(p.a)(e.productsCart).filter((function(e){return e.id!==t.id}));return Object(J.a)(Object(J.a)({},e),{},{productsCart:n})}var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRODUCT_CART_GET":return ne(e,t.items);case"PRODUCT_CART_REMOVE":return ce(e,t.i);default:return e}},ie=Object(F.b)({main:ee,cart:re}),oe=Object(F.c)(ie);s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(h.a,{store:oe,children:Object(i.jsx)(V,{})})}),document.getElementById("root")),q()}},[[39,1,2]]]);
//# sourceMappingURL=main.9f430c1c.chunk.js.map